<div class="container mt-3">
  <% if @book.image_id.attached? %>
    <%= image_tag @book.image_id, size: "200x200" %>
  <% else %>
    <%= image_tag 'no_image', size: "200x200" %>
  <% end %>

  <div>タイトル</div>
  <p><%= @book.name %></p>

  <div>作者</div>
  <p><%= @book.author %></p>

  <div>あらすじ</div>
  <p><%= @book.synopsis %></p>

  <div>ジャンル</div>
  <p><%= @book.genre.name %><p>

  <div>値段</div>
  <p><%= @book.price.to_s(:delimited) %></p>

  <div>
    <p>コメント件数：<%= @book.book_comments.count %></p>
    <% @book.book_comments.each do |book_comment| %>
      <%= book_comment.customer.name %>
      <%= book_comment.created_at.strftime('%Y/%m/%d') %><%= book_comment.comment %>
    <% end %>
  </div>
  <div>
    <%= form_with model: [@book, @book_comment], url:book_book_comments_path(@book.id) do |f| %>
      <%= f.text_area :comment, rows: '5', placeholder: "コメントをここに" %>
      <%= f.submit "送信する" %>
    <% end %>
  </div>

  <% if @book.favorited_by?(current_customer) %>
    <p>
      <%= link_to book_favorite_path(@book), method: :delete do %>
        ♥<%= @book.favorites.count %> いいね
      <% end %>
    </p>
    <% else %>
    <p>
      <%= link_to book_favorites_path(@book), method: :post do %>
        ♡<%= @book.favorites.count %> いいね
      <% end %>
    </p>
  <% end %>

  <%= form_with model: @cart_item, url: cart_items_path, method: :post, local: true do |f| %>
      <%= f.hidden_field :book_id, :value => @book.id.to_s %>
    <p>数量
      <%= f.select :amount, *[1..10] %>
    </p>
      <%= f.submit 'カートに入れる', class: "btn btn-success" %>
  <% end %>
</div>